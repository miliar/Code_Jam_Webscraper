//============================================================================
// Name        : round0-B.cpp
// Author      : rodrijuana
// Date	(D/M/Y): 12/04/2013
//============================================================================
#include <fstream>
#include <string>
#include <math.h>
//#include <iostream>

using namespace std;

int main() {
	
ifstream input("inputA-large.txt");
ofstream output("outputA-large.txt");

int cnt, CNT;

char A[4][4];


input >> CNT;

for (cnt = 1; cnt <= CNT; cnt++)
{   //get case 
	
	bool mb_ne = false;
	
	for (int i = 0; i < 4; i++)
		for (int j = 0; j < 4; j++) {
			input >> A[i][j];
			if (A[i][j] == '.')
				mb_ne = true;
		}
	
	bool Owon = false;
	bool Xwon = false;
		
	for (int i = 0; i < 4; i++)
		if ( (A[i][0]== 'O' && A[i][1]== 'O' && A[i][2]== 'O' && A[i][3]== 'O') ||
			 (A[i][0]== 'T' && A[i][1]== 'O' && A[i][2]== 'O' && A[i][3]== 'O') ||
			 (A[i][0]== 'O' && A[i][1]== 'T' && A[i][2]== 'O' && A[i][3]== 'O') ||
			 (A[i][0]== 'O' && A[i][1]== 'O' && A[i][2]== 'T' && A[i][3]== 'O') ||
			 (A[i][0]== 'O' && A[i][1]== 'O' && A[i][2]== 'O' && A[i][3]== 'T'))
			Owon = true;
	
	if (!Owon)
		for (int j = 0; j < 4; j++)
			if ( (A[0][j]== 'O' && A[1][j]== 'O' && A[2][j]== 'O' && A[3][j]== 'O') ||
				 (A[0][j]== 'T' && A[1][j]== 'O' && A[2][j]== 'O' && A[3][j]== 'O') ||
				 (A[0][j]== 'O' && A[1][j]== 'T' && A[2][j]== 'O' && A[3][j]== 'O') ||
				 (A[0][j]== 'O' && A[1][j]== 'O' && A[2][j]== 'T' && A[3][j]== 'O') ||
				 (A[0][j]== 'O' && A[1][j]== 'O' && A[2][j]== 'O' && A[3][j]== 'T'))
			Owon = true;		
	
	if (!Owon)
		if ( (A[0][0]== 'O' && A[1][1]== 'O' && A[2][2]== 'O' && A[3][3]== 'O') ||
			 (A[0][0]== 'T' && A[1][1]== 'O' && A[2][2]== 'O' && A[3][3]== 'O') ||
			 (A[0][0]== 'O' && A[1][1]== 'T' && A[2][2]== 'O' && A[3][3]== 'O') ||
			 (A[0][0]== 'O' && A[1][1]== 'O' && A[2][2]== 'T' && A[3][3]== 'O') ||
			 (A[0][0]== 'O' && A[1][1]== 'O' && A[2][2]== 'O' && A[3][3]== 'T') ||
			 (A[0][3]== 'O' && A[1][2]== 'O' && A[2][1]== 'O' && A[3][0]== 'O') ||
			 (A[0][3]== 'T' && A[1][2]== 'O' && A[2][1]== 'O' && A[3][0]== 'O') ||
			 (A[0][3]== 'O' && A[1][2]== 'T' && A[2][1]== 'O' && A[3][0]== 'O') ||
			 (A[0][3]== 'O' && A[1][2]== 'O' && A[2][1]== 'T' && A[3][0]== 'O') ||
			 (A[0][3]== 'O' && A[1][2]== 'O' && A[2][1]== 'O' && A[3][0]== 'T'))
			 Owon = true;
		
	if (!Owon)
		for (int i = 0; i < 4; i++)
				if ( (A[i][0]== 'X' && A[i][1]== 'X' && A[i][2]== 'X' && A[i][3]== 'X') ||
					 (A[i][0]== 'T' && A[i][1]== 'X' && A[i][2]== 'X' && A[i][3]== 'X') ||
					 (A[i][0]== 'X' && A[i][1]== 'T' && A[i][2]== 'X' && A[i][3]== 'X') ||
					 (A[i][0]== 'X' && A[i][1]== 'X' && A[i][2]== 'T' && A[i][3]== 'X') ||
					 (A[i][0]== 'X' && A[i][1]== 'X' && A[i][2]== 'X' && A[i][3]== 'T'))
					Xwon = true;
	
	if (!Owon && !Xwon)
		
			for (int j = 0; j < 4; j++)
				if ( (A[0][j]== 'X' && A[1][j]== 'X' && A[2][j]== 'X' && A[3][j]== 'X') ||
					 (A[0][j]== 'T' && A[1][j]== 'X' && A[2][j]== 'X' && A[3][j]== 'X') ||
					 (A[0][j]== 'X' && A[1][j]== 'T' && A[2][j]== 'X' && A[3][j]== 'X') ||
					 (A[0][j]== 'X' && A[1][j]== 'X' && A[2][j]== 'T' && A[3][j]== 'X') ||
					 (A[0][j]== 'X' && A[1][j]== 'X' && A[2][j]== 'X' && A[3][j]== 'T'))
				Xwon = true;		
		
	if (!Owon && !Xwon)
			if ( (A[0][0]== 'X' && A[1][1]== 'X' && A[2][2]== 'X' && A[3][3]== 'X') ||
				 (A[0][0]== 'T' && A[1][1]== 'X' && A[2][2]== 'X' && A[3][3]== 'X') ||
				 (A[0][0]== 'X' && A[1][1]== 'T' && A[2][2]== 'X' && A[3][3]== 'X') ||
				 (A[0][0]== 'X' && A[1][1]== 'X' && A[2][2]== 'T' && A[3][3]== 'X') ||
				 (A[0][0]== 'X' && A[1][1]== 'X' && A[2][2]== 'X' && A[3][3]== 'T') ||
				 (A[0][3]== 'X' && A[1][2]== 'X' && A[2][1]== 'X' && A[3][0]== 'X') ||
				 (A[0][3]== 'T' && A[1][2]== 'X' && A[2][1]== 'X' && A[3][0]== 'X') ||
				 (A[0][3]== 'X' && A[1][2]== 'T' && A[2][1]== 'X' && A[3][0]== 'X') ||
				 (A[0][3]== 'X' && A[1][2]== 'X' && A[2][1]== 'T' && A[3][0]== 'X') ||
				 (A[0][3]== 'X' && A[1][2]== 'X' && A[2][1]== 'X' && A[3][0]== 'T')) 
				 Xwon = true;
	
			
	if (Owon)
		output << "Case #" << cnt << ": O won" << '\n';
	else if (Xwon)
		output << "Case #" << cnt << ": X won" << '\n';
	else if (mb_ne)
		output << "Case #" << cnt << ": Game has not completed" << '\n';
	else
		output << "Case #" << cnt << ": Draw" << '\n';

}

}
