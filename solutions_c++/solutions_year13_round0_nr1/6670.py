#include <stdio.h>
#include <stdlib.h>

FILE *fi=fopen("A-large.in","r");
FILE *fo=fopen("A-large.out","w");


int main()
{
	char A[1000][4][5]={0};
	int T=0, a=0, b=0, c=0, i=0;

	fscanf(fi,"%d",&T);
	for(a=0;a<T;a++){
		for(i=0;i<4;i++){
			fscanf(fi,"%s",A[a][i]);
		}
	}	
	
	for(a=0;a<T;a++){
		if( (A[a][0][0]=='X'||A[a][0][0]=='T')&&(A[a][0][1]=='X'||A[a][0][1]=='T')&&(A[a][0][2]=='X'||A[a][0][2]=='T')&&(A[a][0][3]=='X'||A[a][0][3]=='T')||
			(A[a][1][0]=='X'||A[a][1][0]=='T')&&(A[a][1][1]=='X'||A[a][1][1]=='T')&&(A[a][1][2]=='X'||A[a][1][2]=='T')&&(A[a][1][3]=='X'||A[a][1][3]=='T')||
			(A[a][2][0]=='X'||A[a][2][0]=='T')&&(A[a][2][1]=='X'||A[a][2][1]=='T')&&(A[a][2][2]=='X'||A[a][2][2]=='T')&&(A[a][2][3]=='X'||A[a][2][3]=='T')||
			(A[a][3][0]=='X'||A[a][3][0]=='T')&&(A[a][3][1]=='X'||A[a][3][1]=='T')&&(A[a][3][2]=='X'||A[a][3][2]=='T')&&(A[a][3][3]=='X'||A[a][3][3]=='T')){
			fprintf(fo,"Case #%d: X won\n",a+1);
		}
		else if((A[a][0][0]=='X'||A[a][0][0]=='T')&&(A[a][1][0]=='X'||A[a][1][0]=='T')&&(A[a][2][0]=='X'||A[a][2][0]=='T')&&(A[a][3][0]=='X'||A[a][3][0]=='T')||
		    	(A[a][0][1]=='X'||A[a][0][1]=='T')&&(A[a][1][1]=='X'||A[a][1][1]=='T')&&(A[a][2][1]=='X'||A[a][2][1]=='T')&&(A[a][3][1]=='X'||A[a][3][1]=='T')||
				(A[a][0][2]=='X'||A[a][0][2]=='T')&&(A[a][1][2]=='X'||A[a][1][2]=='T')&&(A[a][2][2]=='X'||A[a][2][2]=='T')&&(A[a][3][2]=='X'||A[a][3][2]=='T')||
				(A[a][0][3]=='X'||A[a][0][3]=='T')&&(A[a][1][3]=='X'||A[a][1][3]=='T')&&(A[a][2][3]=='X'||A[a][2][3]=='T')&&(A[a][3][3]=='X'||A[a][3][3]=='T')){
				fprintf(fo,"Case #%d: X won\n",a+1);
		}
		else if((A[a][0][0]=='O'||A[a][0][0]=='T')&&(A[a][0][1]=='O'||A[a][0][1]=='T')&&(A[a][0][2]=='O'||A[a][0][2]=='T')&&(A[a][0][3]=='O'||A[a][0][3]=='T')||
				(A[a][1][0]=='O'||A[a][1][0]=='T')&&(A[a][1][1]=='O'||A[a][1][1]=='T')&&(A[a][1][2]=='O'||A[a][1][2]=='T')&&(A[a][1][3]=='O'||A[a][1][3]=='T')||
				(A[a][2][0]=='O'||A[a][2][0]=='T')&&(A[a][2][1]=='O'||A[a][2][1]=='T')&&(A[a][2][2]=='O'||A[a][2][2]=='T')&&(A[a][2][3]=='O'||A[a][2][3]=='T')||
				(A[a][3][0]=='O'||A[a][3][0]=='T')&&(A[a][3][1]=='O'||A[a][3][1]=='T')&&(A[a][3][2]=='O'||A[a][3][2]=='T')&&(A[a][3][3]=='O'||A[a][3][3]=='T')){
			fprintf(fo,"Case #%d: O won\n",a+1);
		}
		else if((A[a][0][0]=='O'||A[a][0][0]=='T')&&(A[a][1][0]=='O'||A[a][1][0]=='T')&&(A[a][2][0]=='O'||A[a][2][0]=='T')&&(A[a][3][0]=='O'||A[a][3][0]=='T')||
				(A[a][0][1]=='O'||A[a][0][1]=='T')&&(A[a][1][1]=='O'||A[a][1][1]=='T')&&(A[a][2][1]=='O'||A[a][2][1]=='T')&&(A[a][3][1]=='O'||A[a][3][1]=='T')||
				(A[a][0][2]=='O'||A[a][0][2]=='T')&&(A[a][1][2]=='O'||A[a][1][2]=='T')&&(A[a][2][2]=='O'||A[a][2][2]=='T')&&(A[a][3][2]=='O'||A[a][3][2]=='T')||
				(A[a][0][3]=='O'||A[a][0][3]=='T')&&(A[a][1][3]=='O'||A[a][1][3]=='T')&&(A[a][2][3]=='O'||A[a][2][3]=='T')&&(A[a][3][3]=='O'||A[a][3][3]=='T')){
			fprintf(fo,"Case #%d: O won\n",a+1);
		}
		else if((A[a][0][0]=='X'||A[a][0][0]=='T')&&(A[a][2][2]=='X'||A[a][2][2]=='T')&&(A[a][1][1]=='X'||A[a][1][1]=='T')&&(A[a][3][3]=='X'||A[a][3][3]=='T')){
			fprintf(fo,"Case #%d: X won\n",a+1);
		}
		else if((A[a][3][0]=='X'||A[a][3][0]=='T')&&(A[a][2][1]=='X'||A[a][2][1]=='T')&&(A[a][1][2]=='X'||A[a][1][2]=='T')&&(A[a][0][3]=='X'||A[a][0][3]=='T')){
			fprintf(fo,"Case #%d: X won\n",a+1);
		}
		else if((A[a][0][0]=='O'||A[a][0][0]=='T')&&(A[a][2][2]=='O'||A[a][2][2]=='T')&&(A[a][1][1]=='O'||A[a][1][1]=='T')&&(A[a][3][3]=='O'||A[a][3][3]=='T')){
			fprintf(fo,"Case #%d: O won\n",a+1);
		}
		else if((A[a][3][0]=='O'||A[a][3][0]=='T')&&(A[a][2][1]=='O'||A[a][2][1]=='T')&&(A[a][1][2]=='O'||A[a][1][2]=='T')&&(A[a][0][3]=='O'||A[a][0][3]=='T')){
			fprintf(fo,"Case #%d: O won\n",a+1);
		}
		else if(A[a][0][0]=='.'||A[a][0][1]=='.'||A[a][0][2]=='.'||A[a][0][3]=='.'||A[a][1][0]=='.'||A[a][1][1]=='.'||A[a][1][2]=='.'||A[a][1][3]=='.'||A[a][2][0]=='.'||A[a][2][1]=='.'||A[a][2][2]=='.'||A[a][2][3]=='.'||A[a][3][0]=='.'||A[a][3][1]=='.'||A[a][3][2]=='.'||A[a][3][3]=='.'){
			fprintf(fo,"Case #%d: Game has not completed\n",a+1);
		}
		else{
			fprintf(fo,"Case #%d: Draw\n",a+1);
		}
	}		
	
	return 0;
}