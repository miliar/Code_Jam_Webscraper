#include <iostream>
#include <fstream>
using namespace std;

int main()
{      ofstream myfile;
       myfile.open ("output.txt");
       ifstream his;
       his.open ("A-small-attempt0.in");
     int T;char a[16];
    his>>T;
    for(int i=1;i<=T;i++){
        for(int z=0;z<16;z++)his>>a[z];
        if(((a[1]==a[2])&&((a[0]=='T')||(a[0]==a[1]))&&((a[3]=='T')||(a[3]==a[1]))&&(a[1]=='X'))
           ||((a[5]==a[6])&&(a[4]=='T'||a[4]==a[5])&&(a[7]=='T'||a[7]==a[5])&&(a[5]=='X'))
           ||((a[9]==a[10])&&(a[8]=='T'||a[8]==a[9])&&(a[11]=='T'||a[11]==a[9])&&(a[9]=='X'))
           ||((a[13]==a[14])&&(a[12]=='T'||a[12]==a[13])&&(a[15]=='T'||a[15]==a[13])&&(a[13]=='X'))
           ||((a[8]==a[4])&&(a[12]=='T'||a[12]==a[8])&&(a[0]=='T'||a[0]==a[8])&&(a[8]=='X'))
           ||((a[9]==a[5])&&(a[13]=='T'||a[13]==a[9])&&(a[1]=='T'||a[1]==a[9])&&(a[9]=='X'))
           ||((a[10]==a[6])&&(a[14]=='T'||a[14]==a[10])&&(a[2]=='T'||a[2]==a[10])&&(a[10]=='X'))
           ||((a[11]==a[7])&&(a[15]=='T'||a[15]==a[11])&&(a[3]=='T'||a[3]==a[11])&&(a[11]=='X'))
           ||((a[9]==a[6])&&(a[12]=='T'||a[12]==a[9])&&(a[3]=='T'||a[3]==a[9])&&(a[9]=='X'))
           ||((a[5]==a[10])&&(a[0]=='T'||a[0]==a[5])&&(a[15]=='T'||a[15]==a[5])&&(a[5]=='X'))
           ){myfile<<"Case #"<<i<<": X won"<<endl;goto here;}
         if(((a[1]==a[2])&&(a[0]=='T'||a[0]==a[1])&&(a[3]=='T'||a[3]==a[1])&&(a[1]=='O'))
           ||((a[5]==a[6])&&(a[4]=='T'||a[4]==a[5])&&(a[7]=='T'||a[7]==a[5])&&(a[5]=='O'))
           ||((a[9]==a[10])&&(a[8]=='T'||a[8]==a[9])&&(a[11]=='T'||a[11]==a[9])&&(a[9]=='O'))
           ||((a[13]==a[14])&&(a[12]=='T'||a[12]==a[13])&&(a[15]=='T'||a[15]==a[13])&&(a[13]=='O'))
           ||((a[8]==a[4])&&(a[12]=='T'||a[12]==a[8])&&(a[0]=='T'||a[0]==a[8])&&(a[8]=='O'))
           ||((a[9]==a[5])&&(a[13]=='T'||a[13]==a[9])&&(a[1]=='T'||a[1]==a[9])&&(a[9]=='O'))
           ||((a[10]==a[6])&&(a[14]=='T'||a[14]==a[10])&&(a[2]=='T'||a[2]==a[10])&&(a[10]=='O'))
           ||((a[11]==a[7])&&(a[15]=='T'||a[15]==a[11])&&(a[3]=='T'||a[3]==a[11])&&(a[11]=='O'))
           ||((a[9]==a[6])&&(a[12]=='T'||a[12]==a[9])&&(a[3]=='T'||a[3]==a[9])&&(a[9]=='O'))
           ||((a[5]==a[10])&&(a[0]=='T'||a[0]==a[5])&&(a[15]=='T'||a[15]==a[5])&&(a[5]=='O'))
           ){myfile<<"Case #"<<i<<": O won"<<endl;goto here;}
        if((a[0]=='.')||(a[1]=='.')||(a[2]=='.')||(a[3]=='.')||(a[4]=='.')||(a[5]=='.')
           ||(a[6]=='.')||(a[7]=='.')||(a[8]=='.')||(a[9]=='.')||(a[10]=='.')
           ||(a[11]=='.')||(a[12]=='.')||(a[13]=='.')||(a[14]=='.')||(a[15]=='.')){myfile<<"Case #"<<i<<": Game has not completed"<<endl;goto here;}
        else {myfile<<"Case #"<<i<<": Draw"<<endl;goto here;}
         here:;
       }myfile.close();his.close();
    return 0;}
