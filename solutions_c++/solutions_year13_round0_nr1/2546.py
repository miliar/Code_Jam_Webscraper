#include<cstdio>
#include<iostream>
using namespace std;
int n,a,b,c,d;
int ti,tj,tt;
int x,y;
int kr;
char t[6][6];
int X,O;
main()
{
scanf("%d",&n);
for(int u=1;u<=n;u++)
	{
	x=0;
	y=0;
	kr=0;
	tt=0;
	X=0;
	O=0;
	for(int i=1;i<=4;i++)
		{
		for(int j=1;j<=4;j++)
			{	
			t[i][j]=0;
			while(t[i][j]<33)t[i][j]=getchar_unlocked();
			if(t[i][j]=='T'){tt=1;x=i;y=j;}
			if(t[i][j]=='.'){kr=1;}
			}
		}
		

	//sprawdzamy X
	if(tt)t[x][y]='X';
	if(t[1][1]==t[1][2]&&t[1][2]==t[1][3]&&t[1][3]==t[1][4]&&t[1][4]=='X')X=1;
	if(t[2][1]==t[2][2]&&t[2][2]==t[2][3]&&t[2][3]==t[2][4]&&t[2][4]=='X')X=1;
	if(t[3][1]==t[3][2]&&t[3][2]==t[3][3]&&t[3][3]==t[3][4]&&t[3][4]=='X')X=1;
	if(t[4][1]==t[4][2]&&t[4][2]==t[4][3]&&t[4][3]==t[4][4]&&t[4][4]=='X')X=1;
	
	if(t[1][1]==t[2][1]&&t[2][1]==t[3][1]&&t[3][1]==t[4][1]&&t[4][1]=='X')X=1;
	if(t[1][2]==t[2][2]&&t[2][2]==t[3][2]&&t[3][2]==t[4][2]&&t[4][2]=='X')X=1;
	if(t[1][3]==t[2][3]&&t[2][3]==t[3][3]&&t[3][3]==t[4][3]&&t[4][3]=='X')X=1;
	if(t[1][4]==t[2][4]&&t[2][4]==t[3][4]&&t[3][4]==t[4][4]&&t[4][4]=='X')X=1;
	
	if(t[1][1]==t[2][2]&&t[2][2]==t[3][3]&&t[3][3]==t[4][4]&&t[4][4]=='X')X=1;
	if(t[4][1]==t[3][2]&&t[3][2]==t[2][3]&&t[2][3]==t[4][1]&&t[4][1]=='X')X=1;
	
	//O
	if(tt)t[x][y]='O';
	if(t[1][1]==t[1][2]&&t[1][2]==t[1][3]&&t[1][3]==t[1][4]&&t[1][4]=='O')O=1;
	if(t[2][1]==t[2][2]&&t[2][2]==t[2][3]&&t[2][3]==t[2][4]&&t[2][4]=='O')O=1;
	if(t[3][1]==t[3][2]&&t[3][2]==t[3][3]&&t[3][3]==t[3][4]&&t[3][4]=='O')O=1;
	if(t[4][1]==t[4][2]&&t[4][2]==t[4][3]&&t[4][3]==t[4][4]&&t[4][4]=='O')O=1;
	
	if(t[1][1]==t[2][1]&&t[2][1]==t[3][1]&&t[3][1]==t[4][1]&&t[4][1]=='O')O=1;
	if(t[1][2]==t[2][2]&&t[2][2]==t[3][2]&&t[3][2]==t[4][2]&&t[4][2]=='O')O=1;
	if(t[1][3]==t[2][3]&&t[2][3]==t[3][3]&&t[3][3]==t[4][3]&&t[4][3]=='O')O=1;
	if(t[1][4]==t[2][4]&&t[2][4]==t[3][4]&&t[3][4]==t[4][4]&&t[4][4]=='O')O=1;
	
	if(t[1][1]==t[2][2]&&t[2][2]==t[3][3]&&t[3][3]==t[4][4]&&t[4][4]=='O')O=1;
	if(t[4][1]==t[3][2]&&t[3][2]==t[2][3]&&t[2][3]==t[4][1]&&t[4][1]=='O')O=1;
	
	printf("Case #%d: ",u);
	if(X){printf("X won\n");continue;}
	if(O){printf("O won\n");continue;}
	if(kr){printf("Game has not completed\n");continue;}
	printf("Draw\n");
	}
	
}
