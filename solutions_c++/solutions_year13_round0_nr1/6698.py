#include <iostream>
#include <fstream>

int main()
{
	int t,i,j,k,r,c,f,flag0,flag1;
	char tmp,g[4][4];
	freopen("input","r",stdin);
	freopen("output","w",stdout);
	scanf("%d",&t);
	for(i=1;i<=t;i++)
	{
		j=0;
		while(j<4)
		{
			k=0;
			while(k<4)
			{
				tmp=getchar();
				if(tmp!=0x0A)
				{
					g[j][k]=tmp;
					k++;
				}
			}
			j++;
		}
		f=3;
		r=4;
		c=4;
		for(j=0;j<4;j++)
		{
			for(k=0;k<4;k++)
			{
				if(g[j][k]=='T')
				{
					r=j;
					c=k;
				}
			}
		}
		if(r!=4&&c!=4)
		{
			if(r==c)
			{
				flag0=0;
				flag1=0;
				for(j=0;j<4;j++)
				{
					if(g[j][c]=='O')
					{
						flag0++;
					}
					if(g[j][c]=='X')
					{
						flag1++;
					}
				}
				if(flag0==3)
				f=0;
				if(flag1==3)
				f=1;
				flag0=0;
				flag1=0;
				for(k=0;k<4;k++)
				{
					if(g[r][k]=='O')
					{
						flag0++;
					}
					if(g[r][k]=='X')
					{
						flag1++;
					}
				}
				if(flag0==3)
				f=0;
				if(flag1==3)
				f=1;
				flag0=0;
				flag1=0;
				for(j=0;j<4;j++)
				{
					if(g[j][j]=='O')
					{
						flag0++;
					}
					if(g[j][j]=='X')
					{
						flag1++;
					}
				}
				if(flag0==3)
				f=0;
				if(flag1==3)
				f=1;
			}
			else{
			if((r+c)==3)
			{
				flag0=0;
				flag1=0;
				for(j=0;j<4;j++)
				{
					if(g[j][c]=='O')
					{
						flag0++;
					}
					if(g[j][c]=='X')
					{
						flag1++;
					}
				}
				if(flag0==3)
				f=0;
				if(flag1==3)
				f=1;
				flag0=0;
				flag1=0;
				for(k=0;k<4;k++)
				{
					if(g[r][k]=='O')
					{
						flag0++;
					}
					if(g[r][k]=='X')
					{
						flag1++;
					}
				}
				if(flag0==3)
				f=0;
				if(flag1==3)
				f=1;
				flag0=0;
				flag1=0;
				for(j=0;j<4;j++)
				{
					if(g[j][3-j]=='O')
					{
						flag0++;
					}
					if(g[j][3-j]=='X')
					{
						flag1++;
					}
				}
				if(flag0==3)
				f=0;
				if(flag1==3)
				f=1;
			}
			else
			{
				flag0=0;
				flag1=0;
				for(j=0;j<4;j++)
				{
					if(g[j][c]=='O')
					{
						flag0++;
					}
					if(g[j][c]=='X')
					{
						flag1++;
					}
				}
				if(flag0==3)
				f=0;
				if(flag1==3)
				f=1;
				flag0=0;
				flag1=0;
				for(k=0;k<4;k++)
				{
					if(g[r][k]=='O')
					{
						flag0++;
					}
					if(g[r][k]=='X')
					{
						flag1++;
					}
				}
				if(flag0==3)
				f=0;
				if(flag1==3)
				f=1;
			}}
		}
		for(j=0;j<4;j++)
		{
			flag0=0;
			flag1=0;
			for(k=0;k<4;k++)
			{
				if(g[j][k]=='O')
				flag0++;
				if(g[j][k]=='X')
				flag1++;
			}
			if(flag0==4)
			f=0;
			if(flag1==4)
			f=1;
			flag0=0;
			flag1=0;
			for(k=0;k<4;k++)
			{
				if(g[k][j]=='O')
				flag0++;
				if(g[k][j]=='X')
				flag1++;
			}
			if(flag0==4)
			f=0;
			if(flag1==4)
			f=1;
		}
		flag0=0;
		flag1=0;
		for(j=0;j<4;j++)
		{
			if(g[j][j]=='O')
			flag0++;
			if(g[j][j]=='X')
			flag1++;
		}
		if(flag0==4)
		f=0;
		if(flag1==4)
		f=1;
		flag0=0;
		flag1=0;
		for(j=0;j<4;j++)
		{
			if(g[j][3-j]=='O')
			flag0++;
			if(g[j][3-j]=='X')
			flag1++;
		}
		if(flag0==4)
		f=0;
		if(flag1==4)
		f=1;
		if(f==3)
		{
		for(j=0;j<4;j++)
		{
			for(k=0;k<4;k++)
			{
				if(g[j][k]=='.')
				f=2;
			}
		}}
		switch(f)
		{
			case 0:
			printf("Case #%d: O won\n",i);
			break;
			case 1:
			printf("Case #%d: X won\n",i);
			break;
			case 2:
			printf("Case #%d: Game has not completed\n",i);
			break;
			default:
			printf("Case #%d: Draw\n",i);
		}
	}
	return 0;
}
	
