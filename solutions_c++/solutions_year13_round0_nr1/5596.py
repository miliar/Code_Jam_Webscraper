#include <iostream>
#include <fstream>
#include <string>
#include <vector>

using namespace std;

void run()
{
	vector<string> s(4),s1;

	for(int i=0;i<4;i++)
	{
		cin>>s[i];
	}
	s1=s;
	for(int i=0;i<4;i++)
	{
		for(int j=0;j<4;j++)
		{
			if(s[i][j]=='T')
			{
				s[i][j]='X';
				s1[i][j]='O';
			}
		}
	}

	if( (s[0][0]==s[0][1] && s[0][1]==s[0][2] && s[0][2]==s[0][3] && s[0][3]=='X') ||
		(s[1][0]==s[1][1] && s[1][1]==s[1][2] && s[1][2]==s[1][3] && s[1][3]=='X') ||
		(s[2][0]==s[2][1] && s[2][1]==s[2][2] && s[2][2]==s[2][3] && s[2][3]=='X') ||
		(s[3][0]==s[3][1] && s[3][1]==s[3][2] && s[3][2]==s[3][3] && s[3][3]=='X') ||

		(s[0][0]==s[1][0] && s[1][0]==s[2][0] && s[2][0]==s[3][0] && s[3][0]=='X') ||
		(s[0][1]==s[1][1] && s[1][1]==s[2][1] && s[2][1]==s[3][1] && s[3][1]=='X') ||
		(s[0][2]==s[1][2] && s[1][2]==s[2][2] && s[2][2]==s[3][2] && s[3][2]=='X') ||
		(s[0][3]==s[1][3] && s[1][3]==s[2][3] && s[2][3]==s[3][3] && s[3][3]=='X') ||

		(s[0][0]==s[1][1] && s[1][1]==s[2][2] && s[2][2]==s[3][3] && s[3][3]=='X') ||
		(s[3][0]==s[2][1] && s[2][1]==s[1][2] && s[1][2]==s[0][3] && s[0][3]=='X') )				
	{
		cout<<"X won\n";
		return;
	}

	if( (s1[0][0]==s1[0][1] && s1[0][1]==s1[0][2] && s1[0][2]==s1[0][3] && s1[0][3]=='O') ||
		(s1[1][0]==s1[1][1] && s1[1][1]==s1[1][2] && s1[1][2]==s1[1][3] && s1[1][3]=='O') ||
		(s1[2][0]==s1[2][1] && s1[2][1]==s1[2][2] && s1[2][2]==s1[2][3] && s1[2][3]=='O') ||
		(s1[3][0]==s1[3][1] && s1[3][1]==s1[3][2] && s1[3][2]==s1[3][3] && s1[3][3]=='O') ||

		(s1[0][0]==s1[1][0] && s1[1][0]==s1[2][0] && s1[2][0]==s1[3][0] && s1[3][0]=='O') ||
		(s1[0][1]==s1[1][1] && s1[1][1]==s1[2][1] && s1[2][1]==s1[3][1] && s1[3][1]=='O') ||
		(s1[0][2]==s1[1][2] && s1[1][2]==s1[2][2] && s1[2][2]==s1[3][2] && s1[3][2]=='O') ||
		(s1[0][3]==s1[1][3] && s1[1][3]==s1[2][3] && s1[2][3]==s1[3][3] && s1[3][3]=='O') ||

		(s1[0][0]==s1[1][1] && s1[1][1]==s1[2][2] && s1[2][2]==s1[3][3] && s1[3][3]=='O') ||
		(s1[3][0]==s1[2][1] && s1[2][1]==s1[1][2] && s1[1][2]==s1[0][3] && s1[0][3]=='O'))
	{
		cout<<"O won\n";
		return;
	}

	for(int i=0;i<3;i++)
	{
		for(int j=0;j<3;j++)
		{
			if(s[i][j]=='.')
			{
				cout<<"Game has not completed\n";
				return;
			}
		}
	}

	cout<<"Draw\n";
}

int main()
{
	string input_name = "A-small-attempt2.in";
	string output_name = "output.txt";

	freopen(input_name.c_str(),"r",stdin);
	freopen(output_name.c_str(),"w",stdout);

	int test;
	cin>>test;
	for(int i = 1;i<=test;i++)
	{
		cout<<"Case #"<<i<<": ";
		run();
	}
	return 0;
}