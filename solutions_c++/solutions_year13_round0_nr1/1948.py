#include<stdio.h>
char map[6][6];
int main(){
	freopen("input1.in","r",stdin);
	freopen("output.txt","w",stdout);
	int T,k,i,j,temp,ans,A,B,C;
	scanf("%d",&T);
	for(j=1;j<=T;j++)
	{
		temp=0;
		ans=0;
		for(k=0;k<=3;k++)
		{
			scanf("%s",map[k]);
		}
		for(k=0;k<=3;k++)
		{
			for(i=0;i<=3;i++)
			{
				if(map[k][i]=='.')
				{
					temp=1;
				}
			}
		}
		for(k=0;k<=3;k++)
		{
			A=0;B=0;C=0;
			for(i=0;i<=3;i++)
			{
				if(map[k][i]=='O')
				{
					A++;
				}
				if(map[k][i]=='X')
				{
					B++;
				}
				if(map[k][i]=='T')
				{
					C++;
				}
			}
			if((A==4)||(A==3&&C==1))
			{
				ans=1;
			}
			if((B==4)||(B==3&&C==1))
			{
				ans=2;
			}
		}
		for(k=0;k<=3;k++)
		{
			A=0;B=0;C=0;
			for(i=0;i<=3;i++)
			{
				if(map[i][k]=='O')
				{
					A++;
				}
				if(map[i][k]=='X')
				{
					B++;
				}
				if(map[i][k]=='T')
				{
					C++;
				}
			}
			if((A==4)||(A==3&&C==1))
			{
				ans=1;
			}
			if((B==4)||(B==3&&C==1))
			{
				ans=2;
			}
		}
		A=0;B=0;C=0;
		for(k=0;k<=3;k++)
		{
			if(map[k][k]=='O')
			{
				A++;
			}
			if(map[k][k]=='X')
			{
				B++;
			}
			if(map[k][k]=='T')
			{
				C++;
			}
		}
		if((A==4)||(A==3&&C==1))
		{
			ans=1;
		}
		if((B==4)||(B==3&&C==1))
		{
			ans=2;
		}
		A=0;B=0;C=0;
		for(k=0;k<=3;k++)
		{
			if(map[k][3-k]=='O')
			{
				A++;
			}
			if(map[k][3-k]=='X')
			{
				B++;
			}
			if(map[k][3-k]=='T')
			{
				C++;
			}
		}
		if((A==4)||(A==3&&C==1))
		{
			ans=1;
		}
		if((B==4)||(B==3&&C==1))
		{
			ans=2;
		}
		if(ans==1)
		{
			printf("Case #%d: O won\n",j);
		}
		if(ans==2)
		{
			printf("Case #%d: X won\n",j);
		}
		if(ans==0)
		{
			if(temp==0)
			{
				printf("Case #%d: Draw\n",j);
			}
			else
			{
				printf("Case #%d: Game has not completed\n",j);
			}
		}
	}
}
