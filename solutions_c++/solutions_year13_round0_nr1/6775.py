#include<iostream>


void jud(int);
int main()
{
   int T;
   std::cin>>T;
   for(int i=0;i<T;i++)
      jud(i);
   return 0;
}

void jud(int n)
{
   using namespace std;
   char a[4][4];
   for(int i=0;i<4;i++)
      {
       for(int j=0;j<4;j++)
        std::cin>>a[i][j];
      }
   int b[10];
   
   b[0]=a[0][0]+a[0][1]+a[0][2]+a[0][3];
   b[1]=a[1][0]+a[1][1]+a[1][2]+a[1][3];
   b[2]=a[2][0]+a[2][1]+a[2][2]+a[2][3];
   b[3]=a[3][0]+a[3][1]+a[3][2]+a[3][3];


   b[4]=a[0][0]+a[1][0]+a[2][0]+a[3][0];
   b[5]=a[0][1]+a[1][1]+a[2][1]+a[3][1];
   b[6]=a[0][2]+a[1][2]+a[2][2]+a[3][2];
   b[7]=a[0][3]+a[1][3]+a[2][3]+a[3][3];

   b[8]=a[0][0]+a[1][1]+a[2][2]+a[3][3];
   b[9]=a[0][3]+a[1][2]+a[2][1]+a[3][0];
  
   if(b[0]==352||b[1]==352||b[2]==352||b[3]==352||b[4]==352||b[5]==352||b[6]==352||b[7]==352||b[0]==348||b[1]==348||b[2]==348||b[3]==348||b[4]==348||b[5]==348||b[6]==348||b[7]==348||b[8]==352||b[9]==352||b[8]==348||b[9]==348)
   { cout<<"Case #"<<n+1<<": X won"<<endl; return;}
   else if(b[0]==316||b[1]==316||b[2]==316||b[3]==316||b[4]==316||b[5]==316||b[6]==316||b[7]==316||b[0]==321||b[1]==321||b[2]==321||b[3]==321||b[4]==321||b[5]==321||b[6]==321||b[7]==321||b[8]==316||b[9]==316||b[8]==321||b[9]==321)
   { cout<<"Case #"<<n+1<<": O won"<<endl; return;}
   else if(a[0][0]!='.'&&a[0][1]!='.'&&a[0][2]!='.'&&a[0][3]!='.'&&a[1][0]!='.'&&a[1][1]!='.'&&a[1][2]!='.'&&a[1][3]!='.'&&a[2][0]!='.'&&a[2][1]!='.'&&a[2][2]!='.'&&a[2][3]!='.'&&a[3][0]!='.'&&a[3][1]!='.'&&a[3][2]!='.'&&a[3][3]!='.')
   { cout<<"Case #"<<n+1<<": Draw"<<endl; return;}
   else cout<<"Case #"<<n+1<<": Game has not completed"<<endl; return;

}
