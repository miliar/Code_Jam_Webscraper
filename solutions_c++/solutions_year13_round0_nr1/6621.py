#include<iostream>
using namespace std;
int main()
{
    int t,k;
    cin>>t;
    int flag;
    char a[4][4];
    int free;
    for(k=1;k<=t;k++)
    {         flag=0;free=0;
              for(int i=0;i<4;i++)
              {
               for(int j=0;j<4;j++)
               {
                cin>>a[i][j];
                if(a[i][j]=='.')
                {
                 free=1;
                }
               }
              }
              
              for(int i=0,j=0;i<4;i++)
              {
                     if ( (a[i][j]=='X' && a[i][j+1]=='X' && a[i][j+2]=='X' && a[i][j+3]=='X') || (a[i][j]=='T' && a[i][j+1]=='X' && a[i][j+2]=='X' && a[i][j+3]=='X') || (a[i][j]=='X' && a[i][j+1]=='T' && a[i][j+2]=='X' && a[i][j+3]=='X') || (a[i][j]=='X' && a[i][j+1]=='X' && a[i][j+2]=='T' && a[i][j+3]=='X') || (a[i][j]=='X' && a[i][j+1]=='X' && a[i][j+2]=='X' && a[i][j+3]=='T') )
                     {flag=1;break;}
                     
                     if ( (a[i][j]=='O' && a[i][j+1]=='O' && a[i][j+2]=='O' && a[i][j+3]=='O') || (a[i][j]=='T' && a[i][j+1]=='O' && a[i][j+2]=='O' && a[i][j+3]=='O') || (a[i][j]=='O' && a[i][j+1]=='T' && a[i][j+2]=='O' && a[i][j+3]=='O') || (a[i][j]=='O' && a[i][j+1]=='O' && a[i][j+2]=='T' && a[i][j+3]=='O') || (a[i][j]=='O' && a[i][j+1]=='O' && a[i][j+2]=='O' && a[i][j+3]=='T') )
                     {flag=2;break;}
                     
              }
              for(int i=0,j=0;j<4;j++)
              {
                     if ( (a[i][j]=='X' && a[i+1][j]=='X' && a[i+2][j]=='X' && a[i+3][j]=='X') || (a[i][j]=='T' && a[i+1][j]=='X' && a[i+2][j]=='X' && a[i+3][j]=='X') || (a[i][j]=='X' && a[i+1][j]=='T' && a[i+2][j]=='X' && a[i+3][j]=='X') || (a[i][j]=='X' && a[i+1][j]=='X' && a[i+2][j]=='T' && a[i+3][j]=='X') || (a[i][j]=='X' && a[i+1][j]=='X' && a[i+2][j]=='X' && a[i+3][j]=='T') )
                     {flag=1;break;}
                     
                     if ( (a[i][j]=='O' && a[i+1][j]=='O' && a[i+2][j]=='O' && a[i+3][j]=='O') || (a[i][j]=='T' && a[i+1][j]=='O' && a[i+2][j]=='O' && a[i+3][j]=='O') || (a[i][j]=='O' && a[i+1][j]=='T' && a[i+2][j]=='O' && a[i+3][j]=='O') || (a[i][j]=='O' && a[i+1][j]=='O' && a[i+2][j]=='T' && a[i+3][j]=='O') || (a[i][j]=='O' && a[i+1][j]=='O' && a[i+2][j]=='O' && a[i+3][j]=='T') )
                     {flag=2;break;}
                     
              }
             
              {      int i=0,j=0;
                      if( ( a[i][j]=='X' && a[i+1][j+1]=='X' && a[i+2][j+2]=='X' && a[i+3][j+3]=='X' ) || ( a[i][j]=='T' && a[i+1][j+1]=='X' && a[i+2][j+2]=='X' && a[i+3][j+3]=='X' ) || ( a[i][j]=='X' && a[i+1][j+1]=='T' && a[i+2][j+2]=='X' && a[i+3][j+3]=='X' ) || ( a[i][j]=='X' && a[i+1][j+1]=='X' && a[i+2][j+2]=='T' && a[i+3][j+3]=='X' ) || ( a[i][j]=='X' && a[i+1][j+1]=='X' && a[i+2][j+2]=='X' && a[i+3][j+3]=='T' ) )
                      {flag=1;}
                      
                      if( ( a[i][j]=='O' && a[i+1][j+1]=='O' && a[i+2][j+2]=='O' && a[i+3][j+3]=='O' ) || ( a[i][j]=='T' && a[i+1][j+1]=='O' && a[i+2][j+2]=='O' && a[i+3][j+3]=='O' ) || ( a[i][j]=='O' && a[i+1][j+1]=='T' && a[i+2][j+2]=='O' && a[i+3][j+3]=='O' ) || ( a[i][j]=='O' && a[i+1][j+1]=='O' && a[i+2][j+2]=='T' && a[i+3][j+3]=='O' ) || ( a[i][j]=='O' && a[i+1][j+1]=='O' && a[i+2][j+2]=='O' && a[i+3][j+3]=='T' ) )
                      {flag=2;}
              }
              
              {
                      int i=0,j=3;
                      if( (a[i][j]=='X' && a[i+1][j-1]=='X' && a[i+2][j-2]=='X' && a[i+3][j-3]=='X') || (a[i][j]=='T' && a[i+1][j-1]=='X' && a[i+2][j-2]=='X' && a[i+3][j-3]=='X') || (a[i][j]=='X' && a[i+1][j-1]=='T' && a[i+2][j-2]=='X' && a[i+3][j-3]=='X') || (a[i][j]=='X' && a[i+1][j-1]=='X' && a[i+2][j-2]=='T' && a[i+3][j-3]=='X') || (a[i][j]=='X' && a[i+1][j-1]=='X' && a[i+2][j-2]=='X' && a[i+3][j-3]=='T') )
                      {flag=1;}
                      
                      if( (a[i][j]=='O' && a[i+1][j-1]=='O' && a[i+2][j-2]=='O' && a[i+3][j-3]=='O') || (a[i][j]=='T' && a[i+1][j-1]=='O' && a[i+2][j-2]=='O' && a[i+3][j-3]=='O') || (a[i][j]=='O' && a[i+1][j-1]=='T' && a[i+2][j-2]=='O' && a[i+3][j-3]=='O') || (a[i][j]=='O' && a[i+1][j-1]=='O' && a[i+2][j-2]=='T' && a[i+3][j-3]=='O') || (a[i][j]=='O' && a[i+1][j-1]=='O' && a[i+2][j-2]=='O' && a[i+3][j-3]=='T') )
                      {flag=2;}
                      
              }
              if(flag==1)
                   cout<<"Case #"<<k<<": X won"<<endl;
              else if(flag==2)
                   cout<<"Case #"<<k<<": O won"<<endl;
              else if(flag==0&&free==0)
                   cout<<"Case #"<<k<<": Draw"<<endl;
              else if(flag==0&&free==1) 
                   cout<<"Case #"<<k<<": Game has not completed"<<endl;            
                        
              
    }
    return 0;
}
