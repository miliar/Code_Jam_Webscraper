#include<iostream>
#include<cstdio>
#include<string>
using namespace std;
int te,a,b,c;
char t[10][10],x;
string z;
int main()
{
    ios_base::sync_with_stdio(0);
    cin>>te;
    for(int tt=1;tt<=te;tt++)
    {
               c=0;
               for(int i=0;i<4;i++)
               {
                       cin>>z;
                       for(int j=0;j<4;j++)
                       {
                               t[i][j]=z[j];
                               if(t[i][j]=='T')
                               {
                                               a=i;
                                               b=j;
                                               t[i][j]='X';
                               }
                               if(t[i][j]=='.')
                               c++;
                       }   
               }
               cout<<"Case #";
               cout<<tt;
               cout<<": ";
               if((t[0][0]=='X' && t[0][1]=='X' && t[0][2]=='X' && t[0][3]=='X') || (t[1][0]=='X' && t[1][1]=='X' && t[1][2]=='X' && t[1][3]=='X') || (t[2][0]=='X' && t[2][1]=='X' && t[2][2]=='X' && t[2][3]=='X') || (t[3][0]=='X' && t[3][1]=='X' && t[3][2]=='X' && t[3][3]=='X') || (t[0][0]=='X' && t[1][0]=='X' && t[2][0]=='X' && t[3][0]=='X') || (t[0][1]=='X' && t[1][1]=='X' && t[2][1]=='X' && t[3][1]=='X') || (t[0][2]=='X' && t[1][2]=='X' && t[2][2]=='X' && t[3][2]=='X') || (t[0][3]=='X' && t[1][3]=='X' && t[2][3]=='X' && t[3][3]=='X') || (t[0][0]=='X' && t[1][1]=='X' && t[2][2]=='X' && t[3][3]=='X') || (t[0][3]=='X' && t[1][2]=='X' && t[2][1]=='X' && t[3][0]=='X'))
               cout<<"X won"<<endl;
               else
               {
                   t[a][b]='O';
                   if((t[0][0]=='O' && t[0][1]=='O' && t[0][2]=='O' && t[0][3]=='O') || (t[1][0]=='O' && t[1][1]=='O' && t[1][2]=='O' && t[1][3]=='O') || (t[2][0]=='O' && t[2][1]=='O' && t[2][2]=='O' && t[2][3]=='O') || (t[3][0]=='O' && t[3][1]=='O' && t[3][2]=='O' && t[3][3]=='O') || (t[0][0]=='O' && t[1][0]=='O' && t[2][0]=='O' && t[3][0]=='O') || (t[0][1]=='O' && t[1][1]=='O' && t[2][1]=='O' && t[3][1]=='O') || (t[0][2]=='O' && t[1][2]=='O' && t[2][2]=='O' && t[3][2]=='O') || (t[0][3]=='O' && t[1][3]=='O' && t[2][3]=='O' && t[3][3]=='O') || (t[0][0]=='O' && t[1][1]=='O' && t[2][2]=='O' && t[3][3]=='O') || (t[0][3]=='O' && t[1][2]=='O' && t[2][1]=='O' && t[3][0]=='O'))
                   cout<<"O won"<<endl;
                   else
                   if(c>0)
                   cout<<"Game has not completed"<<endl;
                   else
                   cout<<"Draw"<<endl;
               }
    }
    cin.ignore(2);
    return 0;
}
                   
                   
