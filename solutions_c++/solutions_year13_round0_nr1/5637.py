#include<iostream>
using namespace std;
int T,i,j,flag=0,z;
char a[4][4],ans,*p;
int main()
{
	freopen ("A-small-attempt3.in.txt", "r", stdin);
    freopen ("out.txt", "w", stdout);
	cin>>T;
	z=T;
	while(T--){
		flag=0;
	for(i=0;i<4;i++)
		for(j=0;j<4;j++)
		{
			cin>>a[i][j];
			if(a[i][j] == 'T'){
				p = &a[i][j];
				flag = 1;
			}
		}
	
	
	if(flag==1)
	*p = 'X';
	if((a[0][0]=='X' || a[0][0]=='O') && a[0][0] == (a[0][1]) && a[0][0] == (a[0][2]) && a[0][0] == (a[0][3]))
		{ans = a[0][0]; goto win;}
	if(flag==1)
	*p = 'O';
	if((a[0][0]=='X' || a[0][0]=='O') && a[0][0] == (a[0][1]) && a[0][0] == (a[0][2]) && a[0][0] == (a[0][3]))
		{ans = a[0][0]; goto win;}
	if(flag==1)
	*p = 'X';
	if((a[0][0]=='X' || a[0][0]=='O') && a[0][0] == a[1][0] && a[0][0] == a[2][0] && a[0][0] == a[3][0])
		{ans = a[0][0];	goto win;}
	if(flag==1)
	*p = 'O';
	if((a[0][0]=='X' || a[0][0]=='O') && a[0][0] == a[1][0] && a[0][0] == a[2][0] && a[0][0] == a[3][0])
		{ans = a[0][0];	goto win;}
	if(flag==1)
	*p = 'X';
	if((a[3][0]=='X' || a[3][0]=='O') && a[3][0] == a[3][1] && a[3][0] == a[3][2] && a[3][0] == a[3][3])
		{ans = a[3][0]; goto win;}	
	if(flag==1)
	*p = 'O';
	if((a[3][0]=='X' || a[3][0]=='O') && a[3][0] == a[3][1] && a[3][0] == a[3][2] && a[3][0] == a[3][3])
		{ans = a[3][0]; goto win;}	
	if(flag==1)
	*p = 'X';
	if((a[0][3]=='X' || a[0][3]=='O') && a[0][3] == a[1][3] && a[0][3] == a[2][3] && a[0][3] == a[3][3])
		{ans = a[0][3];	goto win;}
	if(flag==1)
	*p = 'O';
	if((a[0][3]=='X' || a[0][3]=='O') && a[0][3] == a[1][3] && a[0][3] == a[2][3] && a[0][3] == a[3][3])
		{ans = a[0][3];	goto win;}
	if(flag==1)
	*p = 'X';
	if((a[0][0]=='X' || a[0][0]=='O') && a[0][0] == a[1][1] && a[0][0] == a[2][2] && a[0][0] == a[3][3])
		{ans = a[0][0];	goto win;}	
	if(flag==1)
	*p = 'O';
	if((a[0][0]=='X' || a[0][0]=='O') && a[0][0] == a[1][1] && a[0][0] == a[2][2] && a[0][0] == a[3][3])
		{ans = a[0][0];	goto win;}	
	if(flag==1)
	*p = 'X';
	if((a[0][3]=='X' || a[0][3]=='O') && a[0][3] == a[1][2] && a[0][3] == a[2][1] && a[0][3] == a[3][0])
		{ans = a[0][3];	goto win;}
	if(flag==1)
	*p = 'O';
	if((a[0][3]=='X' || a[0][3]=='O') && a[0][3] == a[1][2] && a[0][3] == a[2][1] && a[0][3] == a[3][0])
		{ans = a[0][3];	goto win;}
	if(flag==1)
	*p = 'X';
	if((a[0][1]=='X' || a[0][1]=='O') && a[0][1] == a[1][1] && a[0][1] == a[2][1] && a[0][1] == a[3][1])
		{ans = a[0][1];	goto win;}
	if(flag==1)
	*p = 'O';
	if((a[0][1]=='X' || a[0][1]=='O') && a[0][1] == a[1][1] && a[0][1] == a[2][1] && a[0][1] == a[3][1])
		{ans = a[0][1];	goto win;}
	if(flag==1)
	*p = 'X';
	if((a[0][2]=='X' || a[0][2]=='O') && a[0][2] == a[1][2] && a[0][2] == a[2][2] && a[0][2] == a[3][2])
		{ans = a[0][2];	goto win;}
	if(flag==1)
	*p = 'O';
	if((a[0][2]=='X' || a[0][2]=='O') && a[0][2] == a[1][2] && a[0][2] == a[2][2] && a[0][2] == a[3][2])
		{ans = a[0][2];	goto win;}
	if(flag==1)
	*p = 'X';
	if((a[1][0]=='X' || a[1][0]=='O') && a[1][0] == a[1][1] && a[1][0] == a[1][2] && a[1][0] == a[1][3])
		{ans = a[1][0];	goto win;}
	if(flag==1)
	*p = 'O';
	if((a[1][0]=='X' || a[1][0]=='O') && a[1][0] == a[1][1] && a[1][0] == a[1][2] && a[1][0] == a[1][3])
		{ans = a[1][0];	goto win;}
	if(flag==1)
	*p = 'X';
	if((a[2][0]=='X' || a[2][0]=='O') && a[2][0] == a[2][1] && a[2][0] == a[2][2] && a[2][0] == a[2][3])
		{ans = a[2][0];	goto win;}
	if(flag==1)
	*p = 'O';
	if((a[1][0]=='X' || a[1][0]=='O') && a[1][0] == a[1][1] && a[1][0] == a[1][2] && a[1][0] == a[1][3])
		{ans = a[1][0];	goto win;}

	for(i=0;i<4;i++)
		for(j=0;j<4;j++)
			if(a[i][j] == '.'){
				cout<<"Case #"<<z-T<<": "<<"Game has not completed";
				goto over;
			}
	
	cout<<"Case #"<<z-T<<": "<<"Draw";
	goto over;
	
win:
	cout<<"Case #"<<z-T<<": "<<ans<<" won";
over:;	
	cout<<endl; 
	}
	return 0;
}