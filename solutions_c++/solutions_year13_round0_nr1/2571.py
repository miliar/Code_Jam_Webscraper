#include <iostream>
#include <string>
#include <vector>
#include <algorithm>

using namespace std;

int main() {
	vector< vector<char> > v(4, vector<char>(4));
	vector<char> v1(16);
	vector<char>::iterator it;

	for(int x=0; x<4; x++) {
		for(int y=0; y<4; y++) {
			v[x][y] = '.';
		}
	}
	int T;
	string G;
	cin>>T;
	string tmp;
	getline(cin, tmp);

	for(int i=1; i<=T; i++) {
		v1.clear();
		for(int y=0; y<4; y++) {
			getline(cin, G);
			for(int x=0; x<4; x++) {
				v[x][y] = G[x];
				v1.push_back(G[x]);
			}
		}
		getline(cin, G);
		bool bdone=false;
		it = find(v1.begin(), v1.end(), '.');
		if(v1.end()==it) {
			bdone=true;
		}
		cout<<"Case #"<<i<<": ";
		if(
		   ((v[0][0]=='X' || v[0][0]=='T') &&
			(v[1][0]=='X' || v[1][0]=='T') &&
			(v[2][0]=='X' || v[2][0]=='T') &&
			(v[3][0]=='X' || v[3][0]=='T'))||
		   ((v[0][1]=='X' || v[0][1]=='T') &&
			(v[1][1]=='X' || v[1][1]=='T') &&
			(v[2][1]=='X' || v[2][1]=='T') &&
			(v[3][1]=='X' || v[3][1]=='T'))||
		   ((v[0][2]=='X' || v[0][2]=='T') &&
			(v[1][2]=='X' || v[1][2]=='T') &&
			(v[2][2]=='X' || v[2][2]=='T') &&
			(v[3][2]=='X' || v[3][2]=='T'))||
		   ((v[0][3]=='X' || v[0][3]=='T') &&
			(v[1][3]=='X' || v[1][3]=='T') &&
			(v[2][3]=='X' || v[2][3]=='T') &&
			(v[3][3]=='X' || v[3][3]=='T'))||
		   ((v[0][0]=='X' || v[0][0]=='T') &&
			(v[0][1]=='X' || v[0][1]=='T') &&
			(v[0][2]=='X' || v[0][2]=='T') &&
			(v[0][3]=='X' || v[0][3]=='T'))||
		   ((v[1][0]=='X' || v[1][0]=='T') &&
			(v[1][1]=='X' || v[1][1]=='T') &&
			(v[1][2]=='X' || v[1][2]=='T') &&
			(v[1][3]=='X' || v[1][3]=='T'))||
		   ((v[2][0]=='X' || v[2][0]=='T') &&
			(v[2][1]=='X' || v[2][1]=='T') &&
			(v[2][2]=='X' || v[2][2]=='T') &&
			(v[2][3]=='X' || v[2][3]=='T'))||
		   ((v[3][0]=='X' || v[3][0]=='T') &&
			(v[3][1]=='X' || v[3][1]=='T') &&
			(v[3][2]=='X' || v[3][2]=='T') &&
			(v[3][3]=='X' || v[3][3]=='T'))||

		   ((v[0][0]=='X' || v[0][0]=='T') &&
			(v[1][1]=='X' || v[1][1]=='T') &&
			(v[2][2]=='X' || v[2][2]=='T') &&
			(v[3][3]=='X' || v[3][3]=='T'))||
		   ((v[0][3]=='X' || v[0][3]=='T') &&
			(v[1][2]=='X' || v[1][2]=='T') &&
			(v[2][1]=='X' || v[2][1]=='T') &&
			(v[3][0]=='X' || v[3][0]=='T'))

			)
		{
			cout << "X won";
		}else if(
		   ((v[0][0]=='O' || v[0][0]=='T') &&
			(v[1][0]=='O' || v[1][0]=='T') &&
			(v[2][0]=='O' || v[2][0]=='T') &&
			(v[3][0]=='O' || v[3][0]=='T'))||
		   ((v[0][1]=='O' || v[0][1]=='T') &&
			(v[1][1]=='O' || v[1][1]=='T') &&
			(v[2][1]=='O' || v[2][1]=='T') &&
			(v[3][1]=='O' || v[3][1]=='T'))||
		   ((v[0][2]=='O' || v[0][2]=='T') &&
			(v[1][2]=='O' || v[1][2]=='T') &&
			(v[2][2]=='O' || v[2][2]=='T') &&
			(v[3][2]=='O' || v[3][2]=='T'))||
		   ((v[0][3]=='O' || v[0][3]=='T') &&
			(v[1][3]=='O' || v[1][3]=='T') &&
			(v[2][3]=='O' || v[2][3]=='T') &&
			(v[3][3]=='O' || v[3][3]=='T'))||
		   ((v[0][0]=='O' || v[0][0]=='T') &&
			(v[0][1]=='O' || v[0][1]=='T') &&
			(v[0][2]=='O' || v[0][2]=='T') &&
			(v[0][3]=='O' || v[0][3]=='T'))||
		   ((v[1][0]=='O' || v[1][0]=='T') &&
			(v[1][1]=='O' || v[1][1]=='T') &&
			(v[1][2]=='O' || v[1][2]=='T') &&
			(v[1][3]=='O' || v[1][3]=='T'))||
		   ((v[2][0]=='O' || v[2][0]=='T') &&
			(v[2][1]=='O' || v[2][1]=='T') &&
			(v[2][2]=='O' || v[2][2]=='T') &&
			(v[2][3]=='O' || v[2][3]=='T'))||
		   ((v[3][0]=='O' || v[3][0]=='T') &&
			(v[3][1]=='O' || v[3][1]=='T') &&
			(v[3][2]=='O' || v[3][2]=='T') &&
			(v[3][3]=='O' || v[3][3]=='T'))||

		   ((v[0][0]=='O' || v[0][0]=='T') &&
			(v[1][1]=='O' || v[1][1]=='T') &&
			(v[2][2]=='O' || v[2][2]=='T') &&
			(v[3][3]=='O' || v[3][3]=='T'))||
		   ((v[0][3]=='O' || v[0][3]=='T') &&
			(v[1][2]=='O' || v[1][2]=='T') &&
			(v[2][1]=='O' || v[2][1]=='T') &&
			(v[3][0]=='O' || v[3][0]=='T'))
			)
		{
			cout << "O won";
		}else if(!bdone){
			cout << "Game has not completed";
		}else{
			cout << "Draw";
		}
		cout<<endl;
	}

	return 0;
}
