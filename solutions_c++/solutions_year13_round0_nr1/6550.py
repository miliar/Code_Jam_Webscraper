#include<stdio.h>
int main()
{
long long int t;
char a[6][6];
int i,j,ctr=1;
int flag;

freopen("input1.txt","r",stdin);
freopen("output1.txt","w",stdout);
scanf("%lld",&t);  
while(t--)
{
          flag=0;
          int x=0,y=0;
          for(i=0;i<4;i++)
          {
                          scanf("%s",a[i]);
          }
          for(i=0;i<4;i++)
          {
               for(j=0;j<4;j++)
               {
                        if( j<=0 && a[i][j]=='X' && a[i][j+1]=='X' && a[i][j+2]=='X' && a[i][j+3]=='X'  )
                        {
                          x=1;
                          goto l1;
                        }
                        else if( j<=0 && a[i][j]=='T' && a[i][j+1]=='X' && a[i][j+2]=='X' && a[i][j+3]=='X'  )
                        {
                          x=1;
                          goto l1;
                        }
                        else if( j<=0 && a[i][j]=='X' && a[i][j+1]=='T' && a[i][j+2]=='X' && a[i][j+3]=='X'  )
                        {
                          x=1;
                          goto l1;
                        }
                        else if( j<=0 && a[i][j]=='X' && a[i][j+1]=='X' && a[i][j+2]=='T' && a[i][j+3]=='X'  )
                        {
                          x=1;
                          goto l1;
                        }
                        else if( j<=0 && a[i][j]=='X' && a[i][j+1]=='X' && a[i][j+2]=='X' && a[i][j+3]=='T'  )
                        {
                          x=1;
                          goto l1;
                        }
               }
          }
 
          for(j=0;j<4;j++)
          {
                           for(i=0;i<4;i++)
                           {
                                            if(i<=0 && a[i][j]=='X' && a[i+1][j]=='X' && a[i+2][j]=='X' && a[i+3][j]=='X'  )
                                            {
 
                                                x=1;
                                                goto l1;
                                            }
                                            else if(i<=0 && a[i][j]=='T' && a[i+1][j]=='X' && a[i+2][j]=='X' && a[i+3][j]=='X'  )
                                            {
 
                                                x=1;
                                                goto l1;
                                            }
                                            else if(i<=0 && a[i][j]=='X' && a[i+1][j]=='T' && a[i+2][j]=='X' && a[i+3][j]=='X'  )
                                            {
 
                                                x=1;
                                                goto l1;
                                            }
                                            else if(i<=0 && a[i][j]=='X' && a[i+1][j]=='X' && a[i+2][j]=='T' && a[i+3][j]=='X'  )
                                            {
 
                                                x=1;
                                                goto l1;
                                            }
                                            else if(i<=0 && a[i][j]=='X' && a[i+1][j]=='X' && a[i+2][j]=='X' && a[i+3][j]=='T'  )
                                            {
 
                                                x=1;
                                                goto l1;
                                            }
                          }
                          
             }
 
            if((a[0][0]=='X' && a[1][1]=='X' && a[2][2]=='X' &&  a[3][3]=='X' ) || (a[0][0]=='T' && a[1][1]=='X' && a[2][2]=='X' &&  a[3][3]=='X' ) || (a[0][0]=='X' && a[1][1]=='T' && a[2][2]=='X' &&  a[3][3]=='X' )
            || (a[0][0]=='X' && a[1][1]=='X' && a[2][2]=='T' &&  a[3][3]=='X' ) || (a[0][0]=='X' && a[1][1]=='X' && a[2][2]=='X' &&  a[3][3]=='T' )||
            (a[0][3]=='X' && a[1][2]=='X' && a[2][1]=='X' &&  a[3][0]=='X' ) || (a[0][3]=='X' && a[1][2]=='X' && a[2][1]=='X' &&  a[3][0]=='T' )
            || (a[0][3]=='X' && a[1][2]=='X' && a[2][1]=='T' &&  a[3][0]=='X' ) || (a[0][3]=='X' && a[1][2]=='T' && a[2][1]=='X' &&  a[3][0]=='X' ) 
            || (a[0][3]=='T' && a[1][2]=='X' && a[2][1]=='X' &&  a[3][0]=='X' ))
            {
                          x=1;
                          goto l1;
            }
 
            l1:
            for(i=0;i<4;i++)
            {
               for(j=0;j<4;j++)
               {
                        if(( j<=0 && a[i][j]=='O' && a[i][j+1]=='O' && a[i][j+2]=='O' && a[i][j+3]=='O'  )|| ( j<=0 && a[i][j]=='T' && a[i][j+1]=='O' && a[i][j+2]=='O' && a[i][j+3]=='O'  )
                        || ( j<=0 && a[i][j]=='O' && a[i][j+1]=='T' && a[i][j+2]=='O' && a[i][j+3]=='O'  ) || ( j<=0 && a[i][j]=='O' && a[i][j+1]=='O' && a[i][j+2]=='T' && a[i][j+3]=='O' )
                        || ( j<=0 && a[i][j]=='O' && a[i][j+1]=='O' && a[i][j+2]=='O' && a[i][j+3]=='T'  ))
                        {
                          y=1;
                          goto l2;
                        }
               }        
                        
            }
 
          for(j=0;j<4;j++)
          {
                           for(i=0;i<4;i++)
                           {
                                            if((i<=0 && a[i][j]=='O' && a[i+1][j]=='O' && a[i+2][j]=='O' && a[i+3][j]=='O'  )||
                                               (i<=0 && a[i][j]=='T' && a[i+1][j]=='O' && a[i+2][j]=='O' && a[i+3][j]=='O'  )||
                                               (i<=0 && a[i][j]=='O' && a[i+1][j]=='T' && a[i+2][j]=='O' && a[i+3][j]=='O'  )||
                                               (i<=0 && a[i][j]=='O' && a[i+1][j]=='O' && a[i+2][j]=='T' && a[i+3][j]=='O'  )||
                                               (i<=0 && a[i][j]=='O' && a[i+1][j]=='O' && a[i+2][j]=='O' && a[i+3][j]=='T'  ) )   
                                            {
 
                                                y=1;
                                                goto l2;
                                            }
                                           
                          }
                          
             }
 
            if((a[0][0]=='O' && a[1][1]=='O' && a[2][2]=='O' &&  a[3][3]=='O' ) || (a[0][0]=='T' && a[1][1]=='O' && a[2][2]=='O' &&  a[3][3]=='O' ) || (a[0][0]=='O' && a[1][1]=='T' && a[2][2]=='O' &&  a[3][3]=='O' )
            || (a[0][0]=='O' && a[1][1]=='O' && a[2][2]=='T' &&  a[3][3]=='O' ) || (a[0][0]=='O' && a[1][1]=='O' && a[2][2]=='O' &&  a[3][3]=='T' )||
            (a[0][3]=='O' && a[1][2]=='O' && a[2][1]=='O' &&  a[3][0]=='O' ) || (a[0][3]=='O' && a[1][2]=='O' && a[2][1]=='O' &&  a[3][0]=='T' )
            || (a[0][3]=='O' && a[1][2]=='O' && a[2][1]=='T' &&  a[3][0]=='O' ) || (a[0][3]=='O' && a[1][2]=='T' && a[2][1]=='O' &&  a[3][0]=='O' ) 
            || (a[0][3]=='T' && a[1][2]=='O' && a[2][1]=='O' &&  a[3][0]=='O' ))
            {
                          y=1;
                          goto l2;
            }
            
            l2:
            if(x==0 && y==0)              
            {for(i=0;i<4;i++)
            {
              for(j=0;j<4;j++)
              {
                   if(a[i][j]=='X' || a[i][j]=='O' || a[i][j]=='T')
                      continue;
                   else
                   {   flag=1;
                       break; 
                   }          
              }              
             }
            }                
 
            if((x==0 && y==1))
            printf("Case #%d: O won\n",ctr);
            else if( x==1 && y==0)
            printf("Case #%d: X won\n",ctr);
            else if(flag==1)
            printf("Case #%d: Game has not completed\n",ctr);
            else 
            printf("Case #%d: Draw\n",ctr);
            ctr++; 
}
  
return 0;
}
