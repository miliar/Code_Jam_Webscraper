#include <iostream>
#include <cstdio>
#include <cmath>
using namespace std;
int T,i,j,t,q,w;
char a[5][5];
bool flag,flagO,flagT,flagX;
int main()
{
	freopen("2.out","w",stdout);
    cin >> T;
    for (i=0;i<T;i++)
    {
        flag=0;
        flagO=flagX=flagT=0;
        for (j=0;j<4;j++)
            for (t=0;t<4;t++)
            {
                cin >> a[j][t];
                if (a[j][t]=='.')
                    flag=1;
                if (a[j][t]=='T')
                    {flagT=1;q=j;w=t;}
            }
        if (flagT)
            {a[q][w]='O';}
        if ((a[0][0]=='O' && a[0][1]==a[0][0] && a[0][1]==a[0][2] && a[0][2]==a[0][3]) ||
            (a[1][0]=='O' && a[1][1]==a[1][0] && a[1][1]==a[1][2] && a[1][2]==a[1][3]) ||
            (a[2][0]=='O' && a[2][1]==a[2][0] && a[2][1]==a[2][2] && a[2][2]==a[2][3]) ||
            (a[3][0]=='O' && a[3][1]==a[3][0] && a[3][1]==a[3][2] && a[3][2]==a[3][3]) ||
            (a[0][0]=='O' && a[1][0]==a[0][0] && a[1][0]==a[2][0] && a[2][0]==a[3][0]) ||
            (a[0][1]=='O' && a[1][1]==a[0][1] && a[1][1]==a[2][1] && a[2][1]==a[3][1]) ||
            (a[0][2]=='O' && a[1][2]==a[0][2] && a[1][2]==a[2][2] && a[2][2]==a[3][2]) ||
            (a[0][3]=='O' && a[1][3]==a[0][3] && a[1][3]==a[2][3] && a[2][3]==a[3][3]) ||
            (a[0][0]=='O' && a[1][1]==a[0][0] && a[1][1]==a[2][2] && a[2][2]==a[3][3]) ||
            (a[0][3]=='O' && a[1][2]==a[0][3] && a[1][2]==a[2][1] && a[2][1]==a[3][0]))
            flagO=1;
        if (flagT)
            {a[q][w]='X';}
        if ((a[0][0]=='X' && a[0][1]==a[0][0] && a[0][1]==a[0][2] && a[0][2]==a[0][3]) ||
            (a[1][0]=='X' && a[1][1]==a[1][0] && a[1][1]==a[1][2] && a[1][2]==a[1][3]) ||
            (a[2][0]=='X' && a[2][1]==a[2][0] && a[2][1]==a[2][2] && a[2][2]==a[2][3]) ||
            (a[3][0]=='X' && a[3][1]==a[3][0] && a[3][1]==a[3][2] && a[3][2]==a[3][3]) ||
            (a[0][0]=='X' && a[1][0]==a[0][0] && a[1][0]==a[2][0] && a[2][0]==a[3][0]) ||
            (a[0][1]=='X' && a[1][1]==a[0][1] && a[1][1]==a[2][1] && a[2][1]==a[3][1]) ||
            (a[0][2]=='X' && a[1][2]==a[0][2] && a[1][2]==a[2][2] && a[2][2]==a[3][2]) ||
            (a[0][3]=='X' && a[1][3]==a[0][3] && a[1][3]==a[2][3] && a[2][3]==a[3][3]) ||
            (a[0][0]=='X' && a[1][1]==a[0][0] && a[1][1]==a[2][2] && a[2][2]==a[3][3]) ||
            (a[0][3]=='X' && a[1][2]==a[0][3] && a[1][2]==a[2][1] && a[2][1]==a[3][0]))
            flagX=1;
	printf("Case #%d: ",(i+1));
        if (flagX)
            if (flagO)
                printf("Draw\n");
            else
                printf("X won\n");
        else
            if (flagO)
                printf("O won\n");
            else
                if (flag)
                    printf("Game has not completed\n");
                else
                    printf("Draw\n");

    }
    return 0;
}

