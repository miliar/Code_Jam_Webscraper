#include <stdio.h>
#include <string.h>
#define _USE_MATH_DEFINES
#include <math.h>
#include <algorithm>
#include <iostream>
#include <stack>
#include <queue>
using namespace std;

int main(){
  int t, i, j, k, mem;
  char s[5][5];
  scanf ( "%d", &t );
  for ( i = 0; i < t; i++ ){
    for ( j = 0; j < 4; j++ ) scanf ( "%s", s[j] );
    mem = 0;
    for ( j = 0; j < 4; j++ ) for ( k = 0; k < 4; k++ ) if ( s[j][k] == '.' ) mem++;
    if ( ( s[0][0] == 'X' || s[0][0] == 'T' ) && ( s[0][1] == 'X' || s[0][1] == 'T' ) && ( s[0][2] == 'X' || s[0][2] == 'T' ) && ( s[0][3] == 'X' || s[0][3] == 'T' ) ) printf ( "Case #%d: X won\n", i+1 );
    else if ( ( s[0][0] == 'O' || s[0][0] == 'T' ) && ( s[0][1] == 'O' || s[0][1] == 'T' ) && ( s[0][2] == 'O' || s[0][2] == 'T' ) && ( s[0][3] == 'O' || s[0][3] == 'T' ) ) printf ( "Case #%d: O won\n", i+1 );
    else if ( ( s[1][0] == 'X' || s[1][0] == 'T' ) && ( s[1][1] == 'X' || s[1][1] == 'T' ) && ( s[1][2] == 'X' || s[1][2] == 'T' ) && ( s[1][3] == 'X' || s[1][3] == 'T' ) ) printf ( "Case #%d: X won\n", i+1 );
    else if ( ( s[1][0] == 'O' || s[1][0] == 'T' ) && ( s[1][1] == 'O' || s[1][1] == 'T' ) && ( s[1][2] == 'O' || s[1][2] == 'T' ) && ( s[1][3] == 'O' || s[1][3] == 'T' ) ) printf ( "Case #%d: O won\n", i+1 );
    else if ( ( s[2][0] == 'X' || s[2][0] == 'T' ) && ( s[2][1] == 'X' || s[2][1] == 'T' ) && ( s[2][2] == 'X' || s[2][2] == 'T' ) && ( s[2][3] == 'X' || s[2][3] == 'T' ) ) printf ( "Case #%d: X won\n", i+1 );
    else if ( ( s[2][0] == 'O' || s[2][0] == 'T' ) && ( s[2][1] == 'O' || s[2][1] == 'T' ) && ( s[2][2] == 'O' || s[2][2] == 'T' ) && ( s[2][3] == 'O' || s[2][3] == 'T' ) ) printf ( "Case #%d: O won\n", i+1 );
    else if ( ( s[3][0] == 'X' || s[3][0] == 'T' ) && ( s[3][1] == 'X' || s[3][1] == 'T' ) && ( s[3][2] == 'X' || s[3][2] == 'T' ) && ( s[3][3] == 'X' || s[3][3] == 'T' ) ) printf ( "Case #%d: X won\n", i+1 );
    else if ( ( s[3][0] == 'O' || s[3][0] == 'T' ) && ( s[3][1] == 'O' || s[3][1] == 'T' ) && ( s[3][2] == 'O' || s[3][2] == 'T' ) && ( s[3][3] == 'O' || s[3][3] == 'T' ) ) printf ( "Case #%d: O won\n", i+1 );
    else if ( ( s[0][0] == 'X' || s[0][0] == 'T' ) && ( s[1][0] == 'X' || s[1][0] == 'T' ) && ( s[2][0] == 'X' || s[2][0] == 'T' ) && ( s[3][0] == 'X' || s[3][0] == 'T' ) ) printf ( "Case #%d: X won\n", i+1 );
    else if ( ( s[0][0] == 'O' || s[0][0] == 'T' ) && ( s[1][0] == 'O' || s[1][0] == 'T' ) && ( s[2][0] == 'O' || s[2][0] == 'T' ) && ( s[3][0] == 'O' || s[3][0] == 'T' ) ) printf ( "Case #%d: O won\n", i+1 );
    else if ( ( s[0][1] == 'X' || s[0][1] == 'T' ) && ( s[1][1] == 'X' || s[1][1] == 'T' ) && ( s[2][1] == 'X' || s[2][1] == 'T' ) && ( s[3][1] == 'X' || s[3][1] == 'T' ) ) printf ( "Case #%d: X won\n", i+1 );
    else if ( ( s[0][1] == 'O' || s[0][1] == 'T' ) && ( s[1][1] == 'O' || s[1][1] == 'T' ) && ( s[2][1] == 'O' || s[2][1] == 'T' ) && ( s[3][1] == 'O' || s[3][1] == 'T' ) ) printf ( "Case #%d: O won\n", i+1 );
    else if ( ( s[0][2] == 'X' || s[0][2] == 'T' ) && ( s[1][2] == 'X' || s[1][2] == 'T' ) && ( s[2][2] == 'X' || s[2][2] == 'T' ) && ( s[3][2] == 'X' || s[3][2] == 'T' ) ) printf ( "Case #%d: X won\n", i+1 );
    else if ( ( s[0][2] == 'O' || s[0][2] == 'T' ) && ( s[1][2] == 'O' || s[1][2] == 'T' ) && ( s[2][2] == 'O' || s[2][2] == 'T' ) && ( s[3][2] == 'O' || s[3][2] == 'T' ) ) printf ( "Case #%d: O won\n", i+1 );
    else if ( ( s[0][3] == 'X' || s[0][3] == 'T' ) && ( s[1][3] == 'X' || s[1][3] == 'T' ) && ( s[2][3] == 'X' || s[2][3] == 'T' ) && ( s[3][3]== 'X' || s[3][3] == 'T' ) ) printf ( "Case #%d: X won\n", i+1 );
    else if ( ( s[0][3] == 'O' || s[0][3] == 'T' ) && ( s[1][3] == 'O' || s[1][3] == 'T' ) && ( s[2][3] == 'O' || s[2][3] == 'T' ) && ( s[3][3] == 'O' || s[3][3] == 'T' ) ) printf ( "Case #%d: O won\n", i+1 );
    else if ( ( s[0][0] == 'X' || s[0][0] == 'T' ) && ( s[1][1] == 'X' || s[1][1] == 'T' ) && ( s[2][2] == 'X' || s[2][2] == 'T' ) && ( s[3][3] == 'X' || s[3][3] == 'T' ) ) printf ( "Case #%d: X won\n", i+1 );
    else if ( ( s[0][0] == 'O' || s[0][0] == 'T' ) && ( s[1][1] == 'O' || s[1][1] == 'T' ) && ( s[2][2] == 'O' || s[2][2] == 'T' ) && ( s[3][3] == 'O' || s[3][3] == 'T' ) ) printf ( "Case #%d: O won\n", i+1 );
    else if ( ( s[0][3] == 'O' || s[0][3] == 'T' ) && ( s[1][2] == 'O' || s[1][2] == 'T' ) && ( s[2][1] == 'O' || s[2][1] == 'T' ) && ( s[3][0] == 'O' || s[3][0] == 'T' ) ) printf ( "Case #%d: O won\n", i+1 );
    else if ( ( s[0][3] == 'X' || s[0][3] == 'T' ) && ( s[1][2] == 'X' || s[1][2] == 'T' ) && ( s[2][1] == 'X' || s[2][1] == 'T' ) && ( s[3][0] == 'X' || s[3][0] == 'T' ) ) printf ( "Case #%d: X won\n", i+1 );
    else if (mem) printf ( "Case #%d: Game has not completed\n", i+1 );
    else printf ( "Case #%d: Draw\n", i+1 );
  }
  return 0;
}

