#include<iostream>
#include<queue>
#include<stack>
#include<algorithm>
#include<list>
#include<map>
#include<vector>
#include<string>
#include<cstring>
#include<cstdlib>
#include<cstdio>
#include<cmath>
#include<set>
using namespace std;
#define Author "DemoVersion"
int dx[]={0,0,-1,1,1,-1,1,-1};
int dy[]={1,-1,0,0,1,1,-1,-1};
typedef pair<int,int> pii;
typedef long long ll;
typedef unsigned long long ull;
int main(){
        ios_base::sync_with_stdio(0);
    #ifdef _DEBUG
        freopen("in.txt","r",stdin);
        freopen("out.txt","w",stdout);
    #endif
    int Per[10][10][30]={0};
    Per[1][2][1]=1;
    Per[1][3][1]=1;
    Per[1][3][2]=3;
    Per[1][4][1]=1;
    Per[1][4][2]=3;
    Per[1][4][3]=7;
    Per[1][5][1]=1;
    Per[1][5][2]=3;
    Per[1][5][3]=7;
    Per[1][5][4]=15;
    Per[2][1][1]=1;
    Per[2][2][3]=7;
    Per[2][3][2]=9;
    Per[2][3][5]=31;
    Per[2][4][2]=17;
    Per[2][4][4]=51;
    Per[2][4][7]=127;
    Per[2][5][2]=33;
    Per[2][5][4]=99;
    Per[2][5][6]=231;
    Per[2][5][9]=511;
    Per[3][1][1]=1;
    Per[3][1][2]=3;
    Per[3][2][2]=3;
    Per[3][2][5]=31;
    Per[3][3][1]=1;
    Per[3][3][3]=7;
    Per[3][3][5]=79;
    Per[3][3][8]=255;
    Per[3][4][1]=1;
    Per[3][4][2]=3;
    Per[3][4][3]=273;
    Per[3][4][4]=15;
    Per[3][4][6]=287;
    Per[3][4][8]=831;
    Per[3][4][11]=2047;
    Per[3][5][1]=1;
    Per[3][5][2]=3;
    Per[3][5][3]=7;
    Per[3][5][4]=1059;
    Per[3][5][5]=31;
    Per[3][5][6]=3171;
    Per[3][5][7]=1087;
    Per[3][5][9]=3199;
    Per[3][5][11]=7423;
    Per[3][5][14]=16383;
    Per[4][1][1]=1;
    Per[4][1][2]=3;
    Per[4][1][3]=7;
    Per[4][2][2]=3;
    Per[4][2][4]=15;
    Per[4][2][7]=127;
    Per[4][3][1]=1;
    Per[4][3][2]=9;
    Per[4][3][3]=7;
    Per[4][3][4]=15;
    Per[4][3][6]=63;
    Per[4][3][8]=639;
    Per[4][3][11]=2047;
    Per[4][4][1]=1;
    Per[4][4][2]=3;
    Per[4][4][3]=19;
    Per[4][4][4]=15;
    Per[4][4][5]=31;
    Per[4][4][6]=63;
    Per[4][4][7]=4383;
    Per[4][4][8]=255;
    Per[4][4][10]=4607;
    Per[4][4][12]=13311;
    Per[4][4][15]=32767;
    Per[4][5][1]=1;
    Per[4][5][2]=3;
    Per[4][5][3]=7;
    Per[4][5][4]=39;
    Per[4][5][5]=31;
    Per[4][5][6]=63;
    Per[4][5][7]=127;
    Per[4][5][8]=255;
    Per[4][5][9]=33919;
    Per[4][5][10]=1023;
    Per[4][5][11]=101503;
    Per[4][5][12]=34815;
    Per[4][5][14]=102399;
    Per[4][5][16]=237567;
    Per[4][5][19]=524287;
    Per[5][1][1]=1;
    Per[5][1][2]=3;
    Per[5][1][3]=7;
    Per[5][1][4]=15;
    Per[5][2][2]=3;
    Per[5][2][4]=15;
    Per[5][2][6]=63;
    Per[5][2][9]=511;
    Per[5][3][1]=1;
    Per[5][3][2]=9;
    Per[5][3][3]=7;
    Per[5][3][4]=15;
    Per[5][3][5]=79;
    Per[5][3][6]=63;
    Per[5][3][7]=127;
    Per[5][3][9]=511;
    Per[5][3][11]=5119;
    Per[5][3][14]=16383;
    Per[5][4][1]=1;
    Per[5][4][2]=3;
    Per[5][4][3]=19;
    Per[5][4][4]=15;
    Per[5][4][5]=31;
    Per[5][4][6]=63;
    Per[5][4][7]=319;
    Per[5][4][8]=255;
    Per[5][4][9]=511;
    Per[5][4][10]=1023;
    Per[5][4][11]=70143;
    Per[5][4][12]=4095;
    Per[5][4][14]=73727;
    Per[5][4][16]=212991;
    Per[5][4][19]=524287;
    Per[5][5][1]=1;
    Per[5][5][2]=3;
    Per[5][5][3]=7;
    Per[5][5][4]=39;
    Per[5][5][5]=31;
    Per[5][5][6]=63;
    Per[5][5][7]=127;
    Per[5][5][8]=255;
    Per[5][5][9]=1279;
    Per[5][5][10]=1023;
    Per[5][5][11]=2047;
    Per[5][5][12]=4095;
    Per[5][5][13]=8191;
    Per[5][5][14]=1085439;
    Per[5][5][15]=32767;
    Per[5][5][16]=3248127;
    Per[5][5][17]=1114111;
    Per[5][5][19]=3276799;
    Per[5][5][21]=7602175;
    Per[5][5][24]=16777215;

    int mp[10][10];
    int R,C,M,T,Z,kk,i,j,k,si,sj,l;
    cin>>T;
    for(Z=1;Z<=T;Z++){
        cin>>R>>C>>M;
        cout<<"Case #"<<Z<<":"<<endl;
        if(M==0){
            for(j=0;j<R;j++){
                for(i=0;i<C;i++){
                    if(i==0&&j==0)cout<<"c";
                    else cout<<".";
                }
                cout<<endl;
            }
        }else if(Per[R][C][M]){
            kk=Per[R][C][M];
            memset(mp,0,sizeof(mp));
            l=0;
            for(j=0;j<R;j++){
                    for(i=0;i<C;i++){
                        if(kk&(1<<l)){
                            mp[j][i]=-100;
                                for(k=0;k<8;k++){
                                    if(i+dx[k]<0||i+dx[k]>=C)continue;
                                    if(j+dy[k]<0||j+dy[k]>=R)continue;
                                    mp[j+dy[k]][i+dx[k]]++;
                                }
                        }
                        l++;
                    }
                }
            sj=-1;
            for(j=0;j<R;j++){
                    for(i=0;i<C;i++){
                        if(mp[j][i]==0){
                            sj=j;
                            si=i;
                        }
                    }
            }
            if(sj==-1){
                for(j=0;j<R;j++){
                    for(i=0;i<C;i++){
                        if(mp[j][i]>0){
                            sj=j;
                            si=i;
                    }
                }
            }
            }
            l=0;
            for(j=0;j<R;j++){
                for(i=0;i<C;i++){
                    if(sj==j&&si==i)cout<<"c";
                    else if(kk&(1<<l))cout<<"*";
                    else cout<<".";
                    l++;
                }
                cout<<endl;
            }
        }else{
            cout<<"Impossible"<<endl;
        }
    }
    return 0;
}
