def calculate_wp(team, lines, excluding):
    team_line = lines[team]
    
    wins = team_line.count('1')
    
    if excluding is not None and team_line[excluding] == '1':
        wins -= 1
    
    losses = team_line.count('0')

    if excluding is not None and team_line[excluding] == '0':
        losses -= 1
    
    total_games = wins + losses
    
    return wins*1.0/total_games
    
def find_opponents(team, lines):
    r = []
    
    team_line = lines[team]
    
    for i in xrange(len(team_line)):
        if i != team and team_line[i] != '.':
            r.append(i)
    
    return r

def calculate_owp(team, lines):
    opponents = find_opponents(team, lines)
    
    total_owp = 0
    for opponent in opponents:
        total_owp += calculate_wp(opponent, lines, team)
    
    return total_owp/len(opponents)

def calculate_oowp(team, lines):
    opponents = find_opponents(team, lines)
    
    total_oowp = 0
    for opponent in opponents:
        total_oowp += calculate_owp(opponent, lines)
    
    return total_oowp/len(opponents)
    
def calculate_rpi(team, lines):
    return 0.25 * calculate_wp(team, lines, None) + 0.5 * calculate_owp(team, lines) + 0.25 * calculate_oowp(team, lines)

def process(lines):
    r = []
    for team in xrange(len(lines)):
        r.append(calculate_rpi(team, lines))
        
    return r

number_of_cases = int(raw_input())

for case_number in xrange(1, number_of_cases+1):
    number_of_lines = int(raw_input())

    lines = []
    for i in xrange(number_of_lines):
        lines.append(raw_input())
    
    result = process(lines)
    print "Case #%d:" % (case_number, )
    for rpi in result:
        print rpi
    
    case_number += 1


##lines  = [
##    '.11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11.',
##    '0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00',
##    '01.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.1',
##    '.10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10.',
##    '.11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11.',
##    '0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00',
##    '01.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.1',
##    '.10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10.',
##    '.11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11.',
##    '0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00',
##    '01.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.1',
##    '.10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10.',
##    '.11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11.',
##    '0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00',
##    '01.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.1',
##    '.10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10.',
##    '.11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11.',
##    '0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00',
##    '01.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.1',
##    '.10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10.',
##    '.11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11.',
##    '0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00',
##    '01.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.1',
##    '.10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10.',
##    '.11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11.',
##    '0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00',
##    '01.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.1',
##    '.10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10.',
##    '.11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11.',
##    '0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00',
##    '01.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.1',
##    '.10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10.',
##    '.11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11.',
##    '0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00',
##    '01.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.1',
##    '.10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10.',
##    '.11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11.',
##    '0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00',
##    '01.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.1',
##    '.10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10.',
##    '.11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11.',
##    '0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00',
##    '01.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.1',
##    '.10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10.',
##    '.11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11.',
##    '0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00',
##    '01.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.1',
##    '.10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10.',
##    '.11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11.',
##    '0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00',
##    '01.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.1',
##    '.10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10.',
##    '.11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11.',
##    '0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00',
##    '01.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.1',
##    '.10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10.',
##    '.11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11.',
##    '0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00',
##    '01.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.1',
##    '.10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10.',
##    '.11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11.',
##    '0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00',
##    '01.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.1',
##    '.10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10.',
##    '.11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11.',
##    '0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00',
##    '01.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.1',
##    '.10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10.',
##    '.11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11.',
##    '0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00',
##    '01.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.1',
##    '.10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10.',
##    '.11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11.',
##    '0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00',
##    '01.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.1',
##    '.10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10.',
##    '.11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11.',
##    '0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00',
##    '01.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.1',
##    '.10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10.',
##    '.11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11.',
##    '0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00',
##    '01.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.1',
##    '.10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10.',
##    '.11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11.',
##    '0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00',
##    '01.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.1',
##    '.10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10.',
##    '.11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11.',
##    '0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00',
##    '01.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.1',
##    '.10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10.',
##    '.11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11.',
##    '0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00',
##    '01.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.1',
##    '.10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10.',
##    '.11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11..11.',
##    '0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00',
##    '01.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.101.1',
##    '.10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10..10.',
##]


#print process(lines)
##print calculate_wp(0, lines, None)
##print calculate_wp(1, lines, None)
##print calculate_wp(2, lines, None)
##print calculate_wp(3, lines, None)

##print calculate_owp(0, lines)
##print calculate_owp(1, lines)
##print calculate_owp(2, lines)
##print calculate_owp(3, lines)

##print find_opponents(0, lines)
##print find_opponents(1, lines)
##print find_opponents(2, lines)
##print find_opponents(3, lines)

##print calculate_oowp(0, lines)
##print calculate_oowp(1, lines)
##print calculate_oowp(2, lines)
##print calculate_oowp(3, lines)

##print calculate_rpi(0, lines)
##print calculate_rpi(1, lines)
##print calculate_rpi(2, lines)
##print calculate_rpi(3, lines)